if not IsMissing("Framework","qb-core")then return end;Core=exports["qb-core"]:GetCoreObject()local a=function(b)local c=Core.Functions.GetPlayer(b)return c or print("Player not found for id",b)end;local d=function(b)local c=a(b)return c.PlayerData end;local e=function(b)local c=a(b)return c.Functions end;local f=function(g)if not DoesEntityExist(g)then g=NetworkGetEntityFromNetworkId(g)end;if not DoesEntityExist(g)then return nil end;local h=GetVehicleNumberPlateText(g)return h:gsub('^%s*(.-)%s*$','%1')end;local i={}for j,k in pairs(Core.Shared.Vehicles)do i[tostring(k.hash)]=k.model end;local l=function(m)return i[tostring(m)]end;Lib.Player={CharacterId=function(n,b)return d(b).citizenid end,Identifier=function(n,b,o)return GetPlayerIdentifierByType(b,o)end,License=function(n,b)return Lib.Player.Identifier(n,b,"license")end,Metadata=function(n,b,p,q)if q then e(b).SetMetaData(p,q)end;return d(b).metadata[p]end,Job=function(n,b,q,r)if q then e(b).SetJob(q,r)end;return d(b).job.name end,JobLabel=function(n,b)return d(b).job.label end,JobLevel=function(n,b)return d(b).job.grade end,JobType=function(n,b)return d(b).job.type end,Duty=function(n,b,q)if q then e(b).SetDuty(q)end;return d(b).job.onduty end,Gang=function(n,b,q,r)if q then e(b).SetGang(q,r)end;return d(b).gang.name end,GangLabel=function(n,b)return d(b).gang.label end,GangLevel=function(n,b)return d(b).gang.rank end,Money=function(n,b,s,q)if not s then print("Money type not provided")return end;if q then e(b).SetMoney(s,q)end;return d(b).money[s]end,Cash=function(n,b)return Lib.Player.Money(n,b,"cash")end,HasCash=function(n,b,t)return Lib.Player.Cash(n,b)>=t end,AddCash=function(n,b,t)e(b).AddMoney("cash",t)end,RemoveCash=function(n,b,t)e(b).RemoveMoney("cash",t)end,Bank=function(n,b)return Lib.Player.Money(n,b,"bank")end,HasBank=function(n,b,t)return Lib.Player.Bank(n,b)>=t end,AddBank=function(n,b,t)e(b).AddMoney("bank",t)end,RemoveBank=function(n,b,t)e(b).RemoveMoney("bank",t)end,AddItem=function(n,b,u,t,v,w)return Lib.Inventory.AddItem(n,b,u,t,v,w)end,RemoveItem=function(n,b,u,t,v)return Lib.Inventory.RemoveItem(n,b,u,t,v)end,HasItem=function(n,b,u,t,v)return Lib.Inventory.HasItem(n,b,u,t,v)end,IsVehicleOwned=function(n,g)local x=f(g)return MySQL.scalar.await('SELECT id FROM player_vehicles WHERE plate = ?',{tostring(x)})end,GiveVehicleOwnership=function(n,b,g)if not g then g=GetVehiclePedIsIn(GetPlayerPed(b),false)end;if not g or g==0 then return print("Couldnt find vehicle.")end;local y=Lib.Player.CharacterId(n,b)local x=f(g)local m=GetEntityModel(g)if Lib.Keys and Lib.Keys.Give then Lib.Keys.Give(n,b,g)end;if Lib.Player.IsVehicleOwned(n,g)then return Lib.Database.Update(n,'player_vehicles',{citizenid=y},{plate=x})end;Lib.Database.Insert(n,'player_vehicles',{citizenid=y,license=Lib.Player.License(n,b),vehicle=l(m),hash=m,mods=json.encode(props or{}),plate=x,state=0})end}