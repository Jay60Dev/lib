if not IsMissing("Framework","qbx_core")then return end;local a=exports.qbx_core;local b=function(c)local d=a:GetPlayer(c)return d or print("Player not found for id",c)end;local e=function(c)local d=b(c)return d.PlayerData end;local f=function(c)local d=b(c)return d.Functions end;local g=function(h)if not DoesEntityExist(h)then h=NetworkGetEntityFromNetworkId(h)end;if not DoesEntityExist(h)then return nil end;local i=GetVehicleNumberPlateText(h)return i:gsub('^%s*(.-)%s*$','%1')end;local j={}local k=assert(load(LoadResourceFile("qbx_core","shared/vehicles.lua")))()for l,m in pairs(k)do j[tostring(m.hash)]=m.model end;local n=function(o)return j[tostring(o)]end;Lib.Player={CharacterId=function(p,c)return e(c).citizenid end,Identifier=function(p,c,q)return GetPlayerIdentifierByType(c,q)end,License=function(p,c)return Lib.Player.Identifier(p,c,"license")end,Metadata=function(p,c,r,s)if s then f(c).SetMetaData(r,s)end;return e(c).metadata[r]end,Job=function(p,c,s,t)if s then local u=e(c).citizenid;exports.qbx_core:AddPlayerToJob(u,s,t)end;return e(c).job.name end,JobLabel=function(p,c)return e(c).job.label end,JobLevel=function(p,c)return e(c).job.grade end,JobType=function(p,c)return e(c).job.type end,Duty=function(p,c,s)if s then f(c).SetDuty(s)end;return e(c).job.onduty end,Gang=function(p,c,s,t)if s then local u=e(c).citizenid;exports.qbx_core:AddPlayerToGang(u,s,t)end;return e(c).gang.name end,GangLabel=function(p,c)return e(c).gang.label end,GangLevel=function(p,c)return e(c).gang.rank end,Money=function(p,c,v,s)if not v then print("Money type not provided")return end;if s then f(c).SetMoney(v,s)end;return e(c).money[v]end,Cash=function(p,c)return Lib.Player.Money(p,c,"cash")end,HasCash=function(p,c,w)return Lib.Player.Cash(p,c)>=w end,AddCash=function(p,c,w)return f(c).AddMoney("cash",w)end,RemoveCash=function(p,c,w)return f(c).RemoveMoney("cash",w)end,Bank=function(p,c)return Lib.Player.Money(p,c,"bank")end,HasBank=function(p,c,w)return Lib.Player.Bank(p,c)>=w end,AddBank=function(p,c,w)return f(c).AddMoney("bank",w)end,RemoveBank=function(p,c,w)return f(c).RemoveMoney("bank",w)end,AddItem=function(p,c,x,w,y,z)return Lib.Inventory.AddItem(p,c,x,w,y,z)end,RemoveItem=function(p,c,x,w,y)return Lib.Inventory.RemoveItem(p,c,x,w,y)end,HasItem=function(p,c,x,w,y)return Lib.Inventory.HasItem(p,c,x,w,y)end,IsVehicleOwned=function(p,h)local A=g(h)return MySQL.scalar.await('SELECT id FROM player_vehicles WHERE plate = ?',{tostring(A)})end,GiveVehicleOwnership=function(p,c,h)if not h then h=GetVehiclePedIsIn(GetPlayerPed(c),false)end;if not h or h==0 then return print("Couldnt find vehicle.")end;local B=Lib.Player.CharacterId(p,c)local A=g(h)local o=GetEntityModel(h)if Lib.Keys and Lib.Keys.Give then Lib.Keys.Give(p,c,h)end;if Lib.Player.IsVehicleOwned(p,h)then return Lib.Database.Update(p,'player_vehicles',{citizenid=B},{plate=A})end;Lib.Database.Insert(p,'player_vehicles',{citizenid=B,license=Lib.Player.License(p,c),vehicle=n(o),hash=o,mods=json.encode(props or{}),plate=A,state=0})end}