local a,b=Lib.UseResource()if not a then return end;local c=function(d)local e=b:GetPlayer(d)return e or print("Player not found for id",d)end;local f=function(d)local e=c(d)return e.PlayerData end;local g=function(d)local e=c(d)return e.Functions end;local h=function(i)if not DoesEntityExist(i)then i=NetworkGetEntityFromNetworkId(i)end;if not DoesEntityExist(i)then return nil end;local j=GetVehicleNumberPlateText(i)return j:gsub('^%s*(.-)%s*$','%1')end;local k={}local l=assert(load(LoadResourceFile("qbx_core","shared/vehicles.lua")))()for m,n in pairs(l)do k[tostring(n.hash)]=n.model end;local o=function(p)return k[tostring(p)]end;Lib.Player={CharacterId=function(q,d)return f(d).citizenid end,Identifier=function(q,d,r)return GetPlayerIdentifierByType(d,r)end,License=function(q,d)return Lib.Player.Identifier(q,d,"license")end,Metadata=function(q,d,s,t)if t then g(d).SetMetaData(s,t)end;return f(d).metadata[s]end,Job=function(q,d,t,u)if t then local v=f(d).citizenid;exports.qbx_core:AddPlayerToJob(v,t,u)end;return f(d).job.name end,JobLabel=function(q,d)return f(d).job.label end,JobLevel=function(q,d)return f(d).job.grade end,JobType=function(q,d)return f(d).job.type end,Duty=function(q,d,t)if t then g(d).SetDuty(t)end;return f(d).job.onduty end,Gang=function(q,d,t,u)if t then local v=f(d).citizenid;exports.qbx_core:AddPlayerToGang(v,t,u)end;return f(d).gang.name end,GangLabel=function(q,d)return f(d).gang.label end,GangLevel=function(q,d)return f(d).gang.rank end,Money=function(q,d,w,t)if not w then print("Money type not provided")return end;if t then g(d).SetMoney(w,t)end;return f(d).money[w]end,Cash=function(q,d)return Lib.Player.Money(q,d,"cash")end,HasCash=function(q,d,x)return Lib.Player.Cash(q,d)>=x end,AddCash=function(q,d,x)return g(d).AddMoney("cash",x)end,RemoveCash=function(q,d,x)return g(d).RemoveMoney("cash",x)end,Bank=function(q,d)return Lib.Player.Money(q,d,"bank")end,HasBank=function(q,d,x)return Lib.Player.Bank(q,d)>=x end,AddBank=function(q,d,x)return g(d).AddMoney("bank",x)end,RemoveBank=function(q,d,x)return g(d).RemoveMoney("bank",x)end,AddItem=function(q,d,y,x,z,A)return Lib.Inventory.AddItem(q,d,y,x,z,A)end,RemoveItem=function(q,d,y,x,z)return Lib.Inventory.RemoveItem(q,d,y,x,z)end,HasItem=function(q,d,y,x,z)return Lib.Inventory.HasItem(q,d,y,x,z)end,IsVehicleOwned=function(q,i)local B=h(i)return MySQL.scalar.await('SELECT id FROM player_vehicles WHERE plate = ?',{tostring(B)})end,GiveVehicleOwnership=function(q,d,i)if not i then i=GetVehiclePedIsIn(GetPlayerPed(d),false)end;if not i or i==0 then return print("Couldnt find vehicle.")end;local C=Lib.Player.CharacterId(q,d)local B=h(i)local p=GetEntityModel(i)if Lib.Keys and Lib.Keys.Give then Lib.Keys.Give(q,d,i)end;if Lib.Player.IsVehicleOwned(q,i)then return Lib.Database.Update(q,'player_vehicles',{citizenid=C},{plate=B})end;Lib.Database.Insert(q,'player_vehicles',{citizenid=C,license=Lib.Player.License(q,d),vehicle=o(p),hash=p,mods=json.encode(props or{}),plate=B,state=0})end}