local a=GetConvar("lang","none")local b=GetConvar("ox:locale","none")local c=GetConvar("qb_locale","none")local d=GetConvar("txAdmin-locale","none")local e=GetConvar("esx:locale","none")local f=a~="none"and a or Config.Lang or b~="none"and b or c~="none"and c or d~="none"and d or e~="none"and e or"en"local g=function(h,i)if IsClient then return TriggerServerEvent("lib:locale:needed",h,i)end;local j=("locales/%s.json"):format(f)local k=Shared.LookupTable(h,j)if not k or k[i]then return end;k[i]=("%s%s"):format(i,f=="en"and""or" [NEEDS TRANSLATED]")local l,m=SaveResourceFile(h,j,json.encode(k,{indent=true,sort_keys=true}),-1)if not l then print(("Failed to save translation for %s in resource %s: %s"):format(i,h,m))end end;if Server then RegisterNetEvent("lib:locale:needed",function(h,i)g(h,i)end)end;Shared.GetLang=function()return f end;Shared.Locale=function(h,n)local k=Shared.LookupTable(h,("locales/%s.json"):format(n or f))GetString=function(i,...)if not i then return end;if not k then return i:format(...)end;local o=k[i]if not o then g(h,i)return i:format(...)end;return o:format(...)end;return GetString end