Lib.Teleport=function(a,b,c)c=c or 2000;local d=PlayerPedId()local e=a.w or GetEntityHeading(d)local f=b and GetVehiclePedIsIn(d,false)or 0;f=f==0 and false or f;local g=f and Lib.Cache().seat;SetEntityInvincible(d,true)FreezeEntityPosition(d,true)SetPlayerControl(PlayerId(),false,256)NetworkFadeOutEntity(d,true,true)if f then SetEntityInvincible(f,true)FreezeEntityPosition(f,true)NetworkFadeOutEntity(f,true,true)end;DoScreenFadeOut(1000)Lib.Loop(function()end,{timer=100,timeout=c or 3000})local h=f and SetPedCoordsKeepVehicle or SetEntityCoordsNoOffset;h(d,a.x,a.y,a.z)SetEntityHeading(d,e)DoScreenFadeIn(1000)SetEntityInvincible(d,false)NetworkFadeInEntity(d,true)FreezeEntityPosition(d,false)SetPlayerControl(PlayerId(),true,0)SetGameplayCamRelativeHeading(0)if f then SetEntityInvincible(f,false)NetworkFadeInEntity(f,true)FreezeEntityPosition(f,false)SetPedIntoVehicle(d,f,g)SetVehicleOnGroundProperly(f)end end