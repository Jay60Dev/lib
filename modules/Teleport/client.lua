Client.Teleport=function(a,b,c,d)d=d or 2000;local e=PlayerPedId()local f=b.w or GetEntityHeading(e)local g=c and GetVehiclePedIsIn(e,false)or 0;g=g==0 and false or g;local h=g and Client.Cache(a).seat;SetEntityInvincible(e,true)FreezeEntityPosition(e,true)SetPlayerControl(PlayerId(),false,256)NetworkFadeOutEntity(e,true,true)if g then SetEntityInvincible(g,true)FreezeEntityPosition(g,true)NetworkFadeOutEntity(g,true,true)end;DoScreenFadeOut(1000)Shared.Loop(a,function()end,{timer=100,timeout=d or 3000})local i=g and SetPedCoordsKeepVehicle or SetEntityCoordsNoOffset;i(e,b.x,b.y,b.z)SetEntityHeading(e,f)DoScreenFadeIn(1000)SetEntityInvincible(e,false)NetworkFadeInEntity(e,true)FreezeEntityPosition(e,false)SetPlayerControl(PlayerId(),true,0)SetGameplayCamRelativeHeading(0)if g then SetEntityInvincible(g,false)NetworkFadeInEntity(g,true)FreezeEntityPosition(g,false)SetPedIntoVehicle(e,g,h)SetVehicleOnGroundProperly(g)end end