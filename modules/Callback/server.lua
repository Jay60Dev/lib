local a={}local b={}Server.Callback=function(c,d,e,...)a[e]=a[e]or{}a[e][d]=promise.new()TriggerClientEvent("lib:callback:client",e,d,...)Citizen.Await(a[e][d])local f=a[e][d].value;a[e][d]=nil;return table.unpack(f)end;RegisterNetEvent("lib:callback:resolve",function(d,...)local g=source;if not(a[g]and a[g][d])then return end;a[g][d]:resolve({...})end)Server.RegisterCallback=function(c,d,h)b[d]=h end;RegisterNetEvent("lib:callback:server",function(d,...)local g=source;if not b[d]then return print(("Player: %s tried to call a callback that does not exist: %s"):format(g,d))end;TriggerClientEvent("lib:callback:resolve",g,d,b[d](g,...))end)