AddStore("PLAYERLOADED")AddStore("PLAYERUNLOADED")local a={PLAYERLOADED={client={"QBCore:Client:OnPlayerLoaded","esx:playerLoaded"},server={"QBCore:Server:PlayerLoaded","esx:playerLoaded"}},PLAYERUNLOADED={client={"QBCore:Client:OnPlayerUnload","esx:onPlayerLogout","qbx_core:client:playerLoggedOut"},server={"QBCore:Server:OnPlayerUnload","esx:playerLogout","ox:playerLogout","ND:characterUnloaded","qbx_core:server:playerLoggedOut"}}}Shared.OnPlayerLoaded=function(b,c)AddToStore("PLAYERLOADED",b,c)end;Shared.OnPlayerUnloaded=function(b,c)AddToStore("PLAYERUNLOADED",b,c)end;local d={PLAYERLOADED=0,PLAYERUNLOADED=0}local function e(f,g)local h=GetGameTimer()-d[g]if h<5000 then return end;d[g]=GetGameTimer()for i,j in pairs(STORE[g]or{})do for k=1,#j do j[k](f)end end end;local l=function(source,m,n)if IsClient then return Client.Cache("lib","source")end;if type(source)=="string"then source=tonumber(source)end;if type(source)=="number"and source>0 then return source end;if type(m)=="number"and m>0 then return m end;if type(m)~="table"then return end;local o=m.PlayerData;if not o then return end;return o.source end;for g,p in pairs(a)do for n,q in pairs(p)do if IsClient and n=="client"or Server and n=="server"then for k=1,#q do RegisterNetEvent(q[k],function(m)local source=l(source,m,n)e(source,g)end)end end end end